
# for file in  /lustre/scratch/client/fas/sbsc/ga254/dataproces/WDPA/rasterize/tif_class/wdpaid_IUCN_??_?.tif  ; do qsub /home/fas/sbsc/ga254/scripts/WDPA/sc3_reclass_IUCN_class_tif.sh 
# for file in /lustre/scratch/client/fas/sbsc/ga254/dataproces/WDPA/rasterize/tif_class/wdpaid_IUCN_Ia_L_polyid+1.tif ; do bash /home/fas/sbsc/ga254/scripts/WDPA/sc3_reclass_IUCN_class_tif.sh  $file ; done  


#PBS -S /bin/bash 
#PBS -q fas_normal
#PBS -l walltime=1:00:00:00  
#PBS -l nodes=1:ppn=1
#PBS -V
#PBS -o  /scratch/fas/sbsc/ga254/stdout 
#PBS -e  /scratch/fas/sbsc/ga254/stderr

 echo create location  loc_$tile 

rm -rf  /dev/shm/*
mkdir -p  $RAMDIRG/loc_tmp/tmp

echo "LOCATION_NAME: loc_tmp"                                                       > $HOME/.grass7/rc_$tile
echo "GISDBASE: /dev/shm"                                                          >> $HOME/.grass7/rc_$tile
echo "MAPSET: tmp"                                                                 >> $HOME/.grass7/rc_$tile
echo "GRASS_GUI: text"                                                             >> $HOME/.grass7/rc_$tile

# path to GRASS settings file
export GISRC=$HOME/.grass7/rc_$tile
export GRASS_PYTHON=python
export GRASS_MESSAGE_FORMAT=plain
export GRASS_PAGER=cat
export GRASS_WISH=wish
export GRASS_ADDON_BASE=$HOME/.grass7/addons
export GRASS_VERSION=7.0.0beta1
export GISBASE=/usr/local/cluster/hpc/Apps/GRASS/7.0.0beta1/grass-7.0.0beta1
export GRASS_PROJSHARE=/usr/local/cluster/hpc/Libs/PROJ/4.8.0/share/proj/
export PROJ_DIR=/usr/local/cluster/hpc/Libs/PROJ/4.8.0

export PATH="$GISBASE/bin:$GISBASE/scripts:$PATH"
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:"$GISBASE/lib"
export GRASS_LD_LIBRARY_PATH="$LD_LIBRARY_PATH"
export PYTHONPATH="$GISBASE/etc/python:$PYTHONPATH"
export MANPATH=$MANPATH:$GISBASE/man
export GIS_LOCK=$$
export GRASS_OVERWRITE=1

rm -rf  $RAMDIRG/loc_$tile

echo start importing 
r.in.gdal in=$INDIRG/$tile.tif   out=$tile  location=loc_$tile

g.mapset mapset=PERMANENT  location=loc_$tile

echo import and set the mask 
r.external  -o input=/lustre/scratch/client/fas/sbsc/ga254/dataproces/GSHHG/GSHHS_tif_1km/land_mask_m10fltGSHHS_f_L1_buf10.tif   output=mask  --overwrite  --quiet 
r.mask raster=mask

